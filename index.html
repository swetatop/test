<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Мій особистий посібник</title>
  <style>
    body {
      font-family: 'Segoe UI', Roboto, sans-serif;
      margin: 0; padding: 0;
      background: #f0f2f5;
      color: #333;
    }
    header {
      background: #1f2937;
      color: #fff;
      padding: 15px 20px;
      font-size: 20px;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    section { padding: 20px; }
    h2 { margin-top: 0; }
    form {
      display: flex; flex-wrap: wrap; gap: 10px;
      margin-bottom: 15px;
    }
    input[type=text] {
      flex: 1;
      padding: 10px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
    }
    button {
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      background: linear-gradient(90deg, #6366f1, #22d3ee);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover { filter: brightness(1.1); }
    #clearBtn {
      background: #ef4444;
      margin-bottom: 20px;
    }
    #clearBtn:hover { background: #dc2626; }
    .candidate {
      background: #fff;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .candidate h3 { margin-top: 0; }
    .questionList { list-style: none; padding-left: 0; }
    .questionList li {
      margin-bottom: 12px;
      padding: 10px;
      background: #f9fafb;
      border-radius: 8px;
    }
    .example {
      display: block;
      font-style: italic;
      color: #6b7280;
      margin-top: 4px;
    }
    .result {
      font-weight: bold;
      margin-top: 10px;
      color: #374151;
    }
  </style>
</head>
<body>
  <header>Мій особистий посібник</header>

  <section id="candidates">
    <h2>Список кандидатів</h2>

    <form id="addCandidateForm">
      <input type="text" id="candidateName" placeholder="Ім’я кандидата" required>
      <button type="submit">Додати кандидата</button>
    </form>

    <button id="clearBtn">Очистити всі дані</button>

    <div id="candidateList"></div>
  </section>

  <script>
    let candidates = JSON.parse(localStorage.getItem("candidates")) || [];

    const candidateForm = document.getElementById("addCandidateForm");
    const candidateList = document.getElementById("candidateList");
    const clearBtn = document.getElementById("clearBtn");

    function saveData() {
      localStorage.setItem("candidates", JSON.stringify(candidates));
    }

    function renderCandidates() {
      candidateList.innerHTML = "";
      candidates.forEach((cand, index) => {
        const div = document.createElement("div");
        div.className = "candidate";
        div.innerHTML = `
          <h3>${cand.name}</h3>
          <form class="addQuestionForm">
            <input type="text" class="qText" placeholder="Введіть питання" required>
            <input type="text" class="qExample" placeholder="Приблизна відповідь (необов’язково)">
            <label>
              <input type="checkbox" class="withCheck"> Перевірка
            </label>
            <button type="submit">Додати питання</button>
          </form>
          <ul class="questionList"></ul>
          <p class="result">Правильних: ${cand.correct} | Неправильних: ${cand.incorrect}</p>
        `;

        candidateList.appendChild(div);

        const qForm = div.querySelector(".addQuestionForm");
        const qList = div.querySelector(".questionList");
        const result = div.querySelector(".result");

        cand.questions.forEach((q, qIndex) => {
          const li = document.createElement("li");
          li.textContent = q.text;
          if (q.example) {
            const span = document.createElement("span");
            span.className = "example";
            span.textContent = `Приблизна відповідь: ${q.example}`;
            li.appendChild(span);
          }
          if (q.withCheck) {
            const btnYes = document.createElement("button");
            btnYes.textContent = "Правильно";
            btnYes.disabled = q.answered;
            btnYes.onclick = () => {
              if (!q.answered) {
                cand.correct++;
                q.answered = true;
                saveData();
                renderCandidates();
              }
            };

            const btnNo = document.createElement("button");
            btnNo.textContent = "Неправильно";
            btnNo.disabled = q.answered;
            btnNo.onclick = () => {
              if (!q.answered) {
                cand.incorrect++;
                q.answered = true;
                saveData();
                renderCandidates();
              }
            };

            li.appendChild(btnYes);
            li.appendChild(btnNo);
          }
          qList.appendChild(li);
        });

        qForm.addEventListener("submit", ev => {
          ev.preventDefault();
          const text = qForm.querySelector(".qText").value;
          const example = qForm.querySelector(".qExample").value;
          const withCheck = qForm.querySelector(".withCheck").checked;

          cand.questions.push({ text, example, withCheck, answered: false });
          saveData();
          renderCandidates();
        });
      });
    }

    candidateForm.addEventListener("submit", e => {
      e.preventDefault();
      const name = document.getElementById("candidateName").value;
      candidates.push({ name, questions: [], correct: 0, incorrect: 0 });
      saveData();
      renderCandidates();
      candidateForm.reset();
    });

    clearBtn.addEventListener("click", () => {
      if (confirm("Очистити всі дані?")) {
        candidates = [];
        saveData();
        renderCandidates();
      }
    });

    renderCandidates();
  </script>
</body>
</html>
